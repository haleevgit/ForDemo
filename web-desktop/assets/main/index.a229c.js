window.__require=function t(e,n,o){function i(a,r){if(!n[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!r&&l)return l(c,!0);if(s)return s(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){return i(e[a][1][t]||t)},u,u.exports,t,e,n,o)}return n[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<o.length;a++)i(o[a]);return i}({BlockColorType:[function(t,e,n){"use strict";cc._RF.push(e,"9de196bzNFMJ47efUBGDTDy","BlockColorType"),n.__esModule=!0,n.default=void 0;var o=cc.Enum({Blue:0,Green:1,Purple:2,Red:3,Yellow:4,Bomb:5,Tnt:6,ColumnEraser:7,Teleport:8});n.default=o,e.exports=n.default,cc._RF.pop()},{}],BlockInputCommand:[function(t,e,n){"use strict";cc._RF.push(e,"c31b9RnG7VP8ah9cZCuOEAs","BlockInputCommand"),n.__esModule=!0,n.default=void 0;var o=i(t("GameEvent"));function i(t){return t&&t.__esModule?t:{default:t}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var a=function(t){var e,n;function i(e){return t.call(this,e)||this}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,s(e,n);var a=i.prototype;return a.onDown=function(t,e){cc.systemEvent.emit(o.default.BLOCK_CHOSEN,e.node.parent)},a.onUp=function(){},i}(i(t("IInputCommand")).default);n.default=a,e.exports=n.default,cc._RF.pop()},{GameEvent:"GameEvent",IInputCommand:"IInputCommand"}],Block:[function(t,e){"use strict";cc._RF.push(e,"69ae1uVFftP3KQP8UL7bcQI","Block");var n=a(t("GameEvent")),o=a(t("BlockColorType")),i=(a(t("InputDirection")),a(t("BombType"))),s=a(t("../Enums/TeleportAnimationsType"));function a(t){return t&&t.__esModule?t:{default:t}}cc.Class({extends:cc.Component,properties:{blue:{default:null,type:cc.SpriteFrame},green:{default:null,type:cc.SpriteFrame},purple:{default:null,type:cc.SpriteFrame},red:{default:null,type:cc.SpriteFrame},yellow:{default:null,type:cc.SpriteFrame},inputCatcher:{default:null,type:cc.Node},superAbility:{default:null,type:cc.Node},bombAbility:{default:null,type:cc.SpriteFrame},tntAbility:{default:null,type:cc.SpriteFrame},_elementaryTransfer:{default:233,serializable:!1},_sprite:{default:null,serializable:!1},_superAbility:{default:i.default.None,serializable:!1},_choosingTeleportAnimation:{default:"choosing_teleport"},_acceptedTeleportAnimation:{default:"accepted_teleport"},_initialScale:{default:cc.v2(0,0),serializable:!1}},onEnable:function(){this._handleSubscription(!0),this._sprite=this.node.getComponent(cc.Sprite),this.node.transferred=0,this._initialScale.x=this.node.scaleX,this._initialScale.y=this.node.scaleY,this._chooseBlockColor()},onDisable:function(){this._handleSubscription(!1)},_handleSubscription:function(t){var e=t?"on":"off";cc.systemEvent[e](n.default.TIME_TO_FALL,this.onTimeToFall,this),cc.systemEvent[e](n.default.CHOOSE_COLOR_BLOCK,this.onChooseColorBlock,this),cc.systemEvent[e](n.default.BLOCK_BOMB_DONE,this.onBlockBombChosen,this),cc.systemEvent[e](n.default.COLUMN_ERASER_DONE,this.onColumnEraserDone,this),cc.systemEvent[e](n.default.CREATE_SUPER_BLOCK,this.onCreateSuperBlock,this),cc.systemEvent[e](n.default.CHANGE_BLOCK_ANIMATION,this.onChangeBlockAnimation,this),cc.systemEvent[e](n.default.START_TELEPORTATION,this.onStartTeleportation,this)},_chooseBlockColor:function(){switch(this.node.kind){case o.default.Blue:this.node.getComponent(cc.Sprite).spriteFrame=this.blue,this._sprite.spriteFrame=this.blue;break;case o.default.Green:this._sprite.spriteFrame=this.green;break;case o.default.Purple:this._sprite.spriteFrame=this.purple;break;case o.default.Red:this._sprite.spriteFrame=this.red;break;case o.default.Yellow:this._sprite.spriteFrame=this.yellow}},_stopBlockAnimation:function(){this.node.getComponent(cc.Animation).stop(),this.node.rotation=0,this.node.scaleX=this._initialScale.x,this.node.scaleY=this._initialScale.y},onTimeToFall:function(){var t=this.node.transferred;t>0&&(this.node.opacity=255,pg.tweenManager.add(this.node,{y:this.node.y-this._elementaryTransfer*t},.1*t).onComplete=function(){cc.systemEvent.emit(n.default.BLOCK_FALL,t)})},onChooseColorBlock:function(t,e){t===this.node.id&&(this.node.kind=e,this._chooseBlockColor())},onBlockBombChosen:function(t){this.node.id===t&&(this.superAbility.active=!1)},onColumnEraserDone:function(t){this.node.id===t&&(this.superAbility.active=!1)},onCreateSuperBlock:function(t,e){if(this.node.id===t){var n=this.bombAbility;switch(e){case o.default.Bomb:this.node.kind=o.default.Bomb,this.superAbility.scale*=1.5;break;case o.default.ColumnEraser:this.node.kind=o.default.ColumnEraser,n=this.tntAbility}this.superAbility.active=!0,this.superAbility.getComponent(cc.Sprite).spriteFrame=n}},onChangeBlockAnimation:function(t,e){if(this.node.iI===t.x&&this.node.iJ===t.y){var n;switch(e){case s.default.Choosing:n=this._choosingTeleportAnimation;break;case s.default.Accepted:n=this._acceptedTeleportAnimation;break;case s.default.None:return void this._stopBlockAnimation()}this.node.getComponent(cc.Animation).play(n)}},onStartTeleportation:function(t,e,o,i){var s=!1,a=i;this.node.id===t.id?s=!0:this.node.id===e.id&&(a=o,s=!0),s&&(this._stopBlockAnimation(),pg.tweenManager.add(this.node,{y:a.y,x:a.x},.1).onComplete=function(){cc.systemEvent.emit(n.default.TELEPORTATION_COMPLETE)})}}),cc._RF.pop()},{"../Enums/TeleportAnimationsType":"TeleportAnimationsType",BlockColorType:"BlockColorType",BombType:"BombType",GameEvent:"GameEvent",InputDirection:"InputDirection"}],BombLogic:[function(t,e){"use strict";cc._RF.push(e,"d21adRiTMFEK5ZOxGpa4Emp","BombLogic");var n=i(t("GameEvent")),o=i(t("Feature"));function i(t){return t&&t.__esModule?t:{default:t}}cc.Class({extends:o.default,_logic:function(t,e,n){for(var o=t[0],i=t[1],s=1;s>-2;s-=1)for(var a=1;a>-2;a-=1){var r=i-a,c=o-s;-1<c&&c<n&&-1<r&&r<e&&this.elementsForDeleting.push([[r],[c]])}},onInitializingEvent:function(t,e,o){t&&o&&e||console.log("Not enough data for initializing!!!"),this._logic(t,e,o),cc.systemEvent.emit(n.default.FEATURE_RESULT,this.elementsForDeleting),this.elementsForDeleting=[]}}),cc._RF.pop()},{Feature:"Feature",GameEvent:"GameEvent"}],BombShopInputCommand:[function(t,e,n){"use strict";cc._RF.push(e,"7b7778tJ8RF5Yl8nwRWexWY","BombShopInputCommand"),n.__esModule=!0,n.default=void 0;var o=a(t("GameEvent")),i=a(t("IInputCommand")),s=a(t("BlockColorType"));function a(t){return t&&t.__esModule?t:{default:t}}function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){var e,n;function i(e){return t.call(this,e)||this}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var a=i.prototype;return a.destroyTouch=function(e){t.prototype.destroyTouch.call(this,e),this._currentTouch=null},a.onDown=function(){cc.systemEvent.emit(o.default.CHECK_SCORES_FOR_ABILITY,s.default.Bomb)},a.onMove=function(){},a.onUp=function(){},i}(i.default);n.default=c,e.exports=n.default,cc._RF.pop()},{BlockColorType:"BlockColorType",GameEvent:"GameEvent",IInputCommand:"IInputCommand"}],BombType:[function(t,e,n){"use strict";cc._RF.push(e,"fae3agLT85Kp6SY2HS5ZCbp","BombType"),n.__esModule=!0,n.default=void 0;var o=cc.Enum({None:0,Bomb:1,Tnt:2});n.default=o,e.exports=n.default,cc._RF.pop()},{}],CameraController2D:[function(t,e){"use strict";cc._RF.push(e,"8e8040IYd5NGrcXp6vqHg01","CameraController2D");var n,o=(n=t("GameEvent"))&&n.__esModule?n:{default:n},i=cc.Enum({None:0,Top:1,Bottom:2,Right:3,Left:4}),s=cc.Class({name:"CaptureBoxHelper",properties:{stickMode:{default:i.Bottom,type:i,tooltip:"\u043a \u043a\u0430\u043a\u043e\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0435 \u044d\u043a\u0440\u0430\u043d\u0430 \u043f\u0440\u0438\u043b\u0438\u043f\u0430\u0435\u0442 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"},defaultBox:{type:cc.Node,get:function(){return this._isTransition&&this._transitionBox?this._transitionBox:this._defaultBox},set:function(t){t instanceof cc.Node&&(this._defaultBox=t)},tooltip:"\u043d\u0430\u0447\u0430\u043b\u044c\u043d\u0430\u044f \u043a\u043e\u0440\u043e\u0431\u043a\u0430, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0441\u043c\u043e\u0442\u0440\u0438\u0442 \u043a\u0430\u043c\u0435\u0440\u0430"},_defaultBox:{default:null,type:cc.Node},_isTransition:{default:!1,serializable:!1},_transitTween:{default:null,type:pg.Tween,serializable:!1},_transitValue:{default:0,serializable:!1},_transitionBox:{default:null,type:cc.Node,serializable:!1},_transitionResize:{default:null,type:pg.ResizeComponent,serializable:!1}},transitToBox:function(t,e,n){var o=this;this._isTransition&&this.cancelTransition(),this._transitValue=0,this._transitTween=pg.tweenManager.add(this,{_transitValue:1},e,n),this._setTransitBox(t);var i=this.defaultBox.getComponent(pg.ResizeComponent),s=t.getComponent(pg.ResizeComponent);i&&s&&(this._transitionResize.set(i),this.defaultBox.position.clone(),this._transitTween.onUpdate=function(){o._transitionBox.x=t.x*o._transitValue+(1-o._transitValue)*o._defaultBox.x,o._transitionBox.y=t.y*o._transitValue+(1-o._transitValue)*o._defaultBox.y,o._transitionBox.width=t.width*o._transitValue+(1-o._transitValue)*o._defaultBox.width,o._transitionBox.height=t.height*o._transitValue+(1-o._transitValue)*o._defaultBox.height},this._transitTween.onComplete=function(){o._isTransition=!1,o.defaultBox=t},this._isTransition=!0)},cancelTransition:function(){this._transitTween&&this._transitTween.stop(),this._transitValue=0,this._isTransition=!1,this.defaultBox=this._transitionBox},_setTransitBox:function(t){this._transitionBox||(this._transitionBox=new cc.Node("CameraTransitionBox")),this._transitionResize||(this._transitionResize=this._transitionBox.getComponent(pg.ResizeComponent)||this._transitionBox.addComponent(pg.ResizeComponent)),this._transitionBox.setParent(t.parent)}});cc.Class({extends:cc.Component,properties:{focus:{default:cc.v2(.5,.5),tooltip:"\u0444\u043e\u043a\u0443\u0441 \u043a\u0430\u043c\u0435\u0440\u044b \u043e\u0442 0 \u0434\u043e 1 \u043f\u043e \u043a\u0430\u0436\u0434\u043e\u0439 \u0438\u0437 \u043e\u0441\u0435\u0439"},isUsingCameraBoxes:{default:!1,tooltip:"\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u0430\u043c\u0435\u0440\u0430 \u0431\u043e\u043a\u0441\u044b. \u0415\u0441\u043b\u0438 \u043d\u0435\u0442, \u043f\u0440\u0435\u0434\u043f\u043e\u043b\u0430\u0433\u0430\u0435\u0442\u0441\u044f \u0447\u0442\u043e \u043a\u0430\u043c\u0435\u0440\u0430 \u0441\u0442\u0430\u0442\u0438\u0447\u043d\u0430"},boxHelper:{default:function(){return new s},visible:function(){return this.isUsingCameraBoxes},type:s},fitSpace:{default:!1,visible:function(){return this.isUsingCameraBoxes},tooltip:"\u0435\u0441\u043b\u0438 true, \u043a\u0430\u043c\u0435\u0440\u0430 \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0440\u0443\u0435\u0442 \u043f\u043e\u043f\u0430\u0434\u0430\u043d\u0438\u0435 \u0432\u0441\u0435\u0439 \u043a\u043e\u0440\u043e\u0431\u043a\u0438, \u043d\u0430 false \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u0435 \u043a\u0430\u043c\u0435\u0440\u044b \u0446\u0435\u043b\u0438\u043a\u043e\u043c (\u0431\u0435\u0437 \u0447\u0435\u0440\u043d\u044b\u0445 \u043f\u043e\u043b\u043e\u0441)"},deltaShake:{default:cc.Vec2.ZERO,tooltip:"\u0432\u0435\u043a\u0442\u043e\u0440 \u0434\u043b\u044f \u0448\u0435\u0439\u043a\u0430 \u043a\u0430\u043c\u0435\u0440\u044b. \u0417\u0430\u0434\u0430\u0435\u0442 \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0438 \u0430\u043c\u043f\u043b\u0438\u0442\u0443\u0434\u0443"},shakeFrequency:{default:cc.v2(1,1),tooltip:"\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u043d\u044b\u0445 \u043e\u0431\u043e\u0440\u043e\u0442\u043e\u0432 \u043a\u0430\u043c\u0435\u0440\u044b \u043f\u043e \u043a\u0430\u0436\u0434\u043e\u0439 \u043e\u0441\u0438 \u0437\u0430 \u0441\u0435\u043a\u0443\u043d\u0434\u0443"},_camera:{default:null,serializable:!1},_boxes:{default:{},serializable:!1},_currentShakeOffset:{default:cc.v2(),serializable:!1},_isShaking:{default:!1,serializable:!1},_shakingTime:{default:0,serializable:!1},_staticCameraPos:{default:cc.v2(),serializable:!1}},editor:{menu:"Camera/CameraController2D"},onLoad:function(){this._camera||(this._camera=this.node.getComponent(cc.Camera)),this._handleSubscription(!0)},onEnable:function(){this._staticCameraPos=this.node.position.clone()},update:function(t){if(this._updatePosition(),this._updateZoomRatio(),this._isShaking){this._shakingTime+=t;var e=this.shakeFrequency.x>0?Math.sin(Math.PI*this._shakingTime*this.shakeFrequency.x)*this.deltaShake.x:0,n=this.shakeFrequency.y>0?Math.sin(Math.PI*this._shakingTime*this.shakeFrequency.y)*this.deltaShake.y:0;this._currentShakeOffset=cc.v2(e,n)}},_handleSubscription:function(t){var e=t?"on":"off";cc.systemEvent[e](o.default.CAMERA_TRANSIT_BOX,this.onCameraTransitBox,this),cc.systemEvent[e](o.default.CAMERA_BOX_ADD,this.onCameraBoxAdd,this),cc.systemEvent[e](o.default.CAMERA_BOX_SWITCH,this.onCameraBoxSwitch,this),cc.systemEvent[e](o.default.CAMERA_START_SHAKE,this.onCameraStartShake,this),cc.systemEvent[e](o.default.CAMERA_STOP_SHAKE,this.onCameraStopShake,this)},_updateZoomRatio:function(){var t=1;if(this.boxHelper.defaultBox){var e=this.boxHelper.defaultBox.width,n=this.boxHelper.defaultBox.height,o=pg.settings.GAME_WIDTH/e,i=pg.settings.GAME_HEIGHT/n;t=this.fitSpace?Math.max(o,i):Math.min(o,i)}this._setZoomRatio(t)},_updatePosition:function(){if(this.isUsingCameraBoxes&&this.boxHelper.defaultBox){var t=this.boxHelper.defaultBox.convertToWorldSpaceAR(cc.Vec2.ZERO),e=cc.v2(this._camera.width*(this.boxHelper.defaultBox.anchorX-this.focus.x),this._camera.height*(this.boxHelper.defaultBox.anchorY-this.focus.y)),n=t.add(e);this._checkStickPosition(n);var o=this.node.parent.convertToNodeSpaceAR(n);this.node.setPosition(o.add(this._currentShakeOffset))}else this.isUsingCameraBoxes||this.node.setPosition(this._staticCameraPos.add(this._currentShakeOffset))},_checkStickPosition:function(t){switch(cc.view.getVisibleSize(),this.boxHelper.stickMode){case i.Top:t.y=t.y-.5*(this._camera.height-this.boxHelper.defaultBox.height);break;case i.Bottom:t.y=t.y+.5*(this._camera.height-this.boxHelper.defaultBox.height);break;case i.Right:t.x=t.x-.5*(this._camera.width-this.boxHelper.defaultBox.width);break;case i.Left:t.x=t.x+.5*(this._camera.width-this.boxHelper.defaultBox.width)}},_setZoomRatio:function(t){this._camera.zoomRatio=t,this._camera.width=pg.settings.GAME_WIDTH/this._camera.zoomRatio,this._camera.height=pg.settings.GAME_HEIGHT/this._camera.zoomRatio},onCameraTransitBox:function(t,e,n){void 0===e&&(e=0),t&&(0===e?this.boxHelper.defaultBox=t:this.boxHelper.transitToBox(t,e,n))},onCameraBoxAdd:function(t,e){e instanceof cc.Node&&(this._boxes[t]=e)},onCameraBoxSwitch:function(t,e,n){var o=this._boxes[t];this.onCameraTransitBox(o,e,n)},onCameraStartShake:function(){this._isShaking=!0},onCameraStopShake:function(){this._isShaking=!1,this._currentShakeOffset=cc.v2(),this._shakingTime=0}}),cc._RF.pop()},{GameEvent:"GameEvent"}],CatcherOff:[function(t,e){"use strict";cc._RF.push(e,"2d6f4WajfhFHYPGOnHqbeme","CatcherOff");var n,o=(n=t("GameEvent"))&&n.__esModule?n:{default:n};cc.Class({extends:cc.Component,properties:{inputCatcher:{default:null,type:cc.Node}},onEnable:function(){this._handleSubscription(!0),this.inputCatcher.actived=!1},onDisable:function(){this._handleSubscription(!1)},_handleSubscription:function(t){var e=t?"on":"off";cc.systemEvent[e](o.default.BLOCK_CHOSEN,this.onBlockChosen,this)},onBlockChosen:function(){this.inputCatcher.actived=!0}}),cc._RF.pop()},{GameEvent:"GameEvent"}],ColumnEraser:[function(t,e){"use strict";cc._RF.push(e,"da45aRNrDdKgKjDH7ijxVgc","ColumnEraser");var n=i(t("GameEvent")),o=i(t("Feature"));function i(t){return t&&t.__esModule?t:{default:t}}cc.Class({extends:o.default,_logic:function(t,e,n){for(var o=t[1],i=0;i<n;i+=1){var s=i;this.elementsForDeleting.push([[o],[s]])}},onInitializingEvent:function(t,e,o){t&&o&&e||console.log("Not enough data for initializing!!!"),this._logic(t,e,o),cc.systemEvent.emit(n.default.FEATURE_RESULT,this.elementsForDeleting),this.elementsForDeleting=[]}}),cc._RF.pop()},{Feature:"Feature",GameEvent:"GameEvent"}],CrossPromoCross:[function(t,e){"use strict";cc._RF.push(e,"8a598UGpmVK/65RKI7Kymy2","CrossPromoCross");var n,o=(n=t("GameEvent"))&&n.__esModule?n:{default:n};cc.Class({extends:cc.Component,properties:{_inputCatcher:{default:null,serializable:!1}},onEnable:function(){var t=this;"cross-promo"!==window.AD_TYPE?this.node.active=!1:window.IS_END_CARD||(this._hadleSubscription(!0),this._inputCatcher=this.getComponent("InputCatcher"),this._inputCatcher.enabled=!1,this.node.opacity=0,this.scheduleOnce(function(){t._enableCross()},4))},_hadleSubscription:function(t){var e=t?"on":"off";cc.systemEvent[e](o.default.FIRST_TAP,this.onFirstTap,this)},_enableCross:function(){0!==this.node.opacity||this._inputCatcher.enabled||(this.node.opacity=255,this._inputCatcher.enabled=!0)},onFirstTap:function(){this._enableCross()}}),cc._RF.pop()},{GameEvent:"GameEvent"}],CrossPromoInputCommand:[function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"f39e3R2MItObI4/T071Lr6Z","CrossPromoInputCommand"),n.__esModule=!0,n.default=void 0,o(t("GameEvent"));var s=function(t){var e,n;function o(e){return t.call(this,e)||this}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,i(e,n);var s=o.prototype;return s.onDown=function(){},s.onUp=function(){try{closeTab()}catch(t){cc.log("Close Button")}},o}(o(t("IInputCommand")).default);n.default=s,e.exports=n.default,cc._RF.pop()},{GameEvent:"GameEvent",IInputCommand:"IInputCommand"}],EffectType:[function(t,e,n){"use strict";cc._RF.push(e,"a66f2qFgdlKVJKrP+cJswgJ","EffectType"),n.__esModule=!0,n.default=void 0;var o=cc.Enum({None:0,Explosion:1});n.default=o,e.exports=n.default,cc._RF.pop()},{}],Effect:[function(t,e){"use strict";cc._RF.push(e,"47808aZDq1NioaQH2fMTRwu","Effect");var n,o=(n=t("GameEvent"))&&n.__esModule?n:{default:n};cc.Class({extends:cc.Component,properties:{effect:{default:null,type:cc.Prefab}},onEnable:function(){this._handleSubscription(!0)},onDisable:function(){this._handleSubscription(!1)},_handleSubscription:function(t){var e=t?"on":"off";cc.systemEvent[e](o.default.SPAWN_EFFECT,this.onSpawnEffect,this)},onSpawnEffect:function(t){var e=cc.instantiate(this.effect);e.setParent(this.node),e.x=t.x,e.y=t.y,e.active=!0}}),cc._RF.pop()},{GameEvent:"GameEvent"}],FakeScreenInputCommand:[function(t,e,n){"use strict";cc._RF.push(e,"7c82d8ZPdpGWpH21LCmJU7E","FakeScreenInputCommand"),n.__esModule=!0,n.default=void 0;var o=i(t("GameEvent"));function i(t){return t&&t.__esModule?t:{default:t}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var a=function(t){var e,n;function i(e){var n;return(n=t.call(this,e)||this)._vungleOnComplete=!1,n}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,s(e,n);var a=i.prototype;return a.onDown=function(){this._vungleOnComplete||(window.onGameComplete instanceof Function&&window.onGameComplete(),this._vungleOnComplete=!0),cc.systemEvent.emit(o.default.REDIRECT_PROCESSING)},a.onUp=function(){},i}(i(t("IInputCommand")).default);n.default=a,e.exports=n.default,cc._RF.pop()},{GameEvent:"GameEvent",IInputCommand:"IInputCommand"}],FeatureManager:[function(t,e){"use strict";cc._RF.push(e,"1eaf0nnGjtLarvScrszCDde","FeatureManager"),cc.Class({extends:cc.Component,properties:{features:{default:[],type:cc.Node}},onEnable:function(){this.node.children.forEach(function(t){t&&(t.active=!1)}),this.features.forEach(function(t){t&&(t.active=!0)})}}),cc._RF.pop()},{}],Feature:[function(t,e){"use strict";cc._RF.push(e,"c6125Ma2UJLTJjSqpKXkf3h","Feature");var n,o=(n=t("GameEvent"))&&n.__esModule?n:{default:n};cc.Class({extends:cc.Component,properties:{initializingEvent:{default:o.default.BOMB_IS_AVAILABLE,type:o.default},scoreForInitializing:{default:0,type:cc.Integer},elementsForDeleting:{default:[],type:Array}},onEnable:function(){this._handleSubscription(!0)},onDisable:function(){this._handleSubscription(!1)},_handleSubscription:function(t){var e=t?"on":"off";cc.systemEvent[e](this.initializingEvent,this.onInitializingEvent,this),cc.systemEvent[e](o.default.CHECK_SCORES_FOR_ABILITY,this.onCheckScoreForAbility,this)},onInitializingEvent:function(t,e,n){return t&&n&&e||console.log("Not enough data for initializing!!!"),this._elementsForDeleting},onCheckScoreForAbility:function(t){cc.systemEvent.emit(o.default.IS_SCORE_ENOUGH,t,this.scoreForInitializing)}}),cc._RF.pop()},{GameEvent:"GameEvent"}],Field:[function(t,e){"use strict";cc._RF.push(e,"7a42boq6wlMgoj03qxQZKBF","Field");var n,o=(n=t("GameEvent"))&&n.__esModule?n:{default:n};cc.Class({extends:cc.Component,properties:{block:{default:null,type:cc.Prefab},mask:{default:null,type:cc.Node},inputCatcher:{default:null,type:cc.Node}},onEnable:function(){this._handleSubscription(!0),cc.systemEvent.emit(o.default.FIELD_ON,this.mask,this.block),this.inputCatcher.active=!1},onDisable:function(){this._handleSubscription(!1)},_handleSubscription:function(t){var e=t?"on":"off";cc.systemEvent[e](o.default.STOP_INPUT,this.onStopInput,this),cc.systemEvent[e](o.default.BLOCK_CAN_BE_CHOSEN,this.onBlockCanBeChosen,this)},onStopInput:function(){this.inputCatcher.active=!0},onBlockCanBeChosen:function(){this.inputCatcher.active=!1}}),cc._RF.pop()},{GameEvent:"GameEvent"}],GameAreaInputCommand:[function(t,e,n){"use strict";cc._RF.push(e,"1eb77TaoxxNnIaHn0+PDWVh","GameAreaInputCommand"),n.__esModule=!0,n.default=void 0;var o=i(t("GameEvent"));function i(t){return t&&t.__esModule?t:{default:t}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var a=function(t){var e,n;function i(e){return t.call(this,e)||this}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,s(e,n);var a=i.prototype;return a.destroyTouch=function(e){t.prototype.destroyTouch.call(this,e),this._currentTouch=null},a.onDown=function(t,e,n,i,s,a){cc.systemEvent.emit(o.default.CREATE_SUPER_ABILITY,a),cc.log(this.node)},a.onMove=function(){},a.onUp=function(){},i}(i(t("IInputCommand")).default);n.default=a,e.exports=n.default,cc._RF.pop()},{GameEvent:"GameEvent",IInputCommand:"IInputCommand"}],GameEvent:[function(t,e,n){"use strict";cc._RF.push(e,"c5effbsSV9IzIFeGKZeUvQ+","GameEvent"),n.__esModule=!0,n.default=void 0;var o=cc.Enum({NONE:0,INPUT:20,SET_LEVEL_DATA:31,CREATE_GAME_OBJECT:101,GET_GAME_OBJECT_PARENT:102,WORLD_LOADED:103,SPAWN_EFFECT:401,GET_PLAYING_EFFECTS:403,CAMERA_START_SHAKE:501,CAMERA_STOP_SHAKE:502,TOGGLE_SCREEN:601,SHOW_SCREEN:602,FIELD_ON:700,BLOCK_CHOSEN:701,TIME_TO_FALL:702,CHOOSE_COLOR_BLOCK:703,BLOCK_CAN_BE_CHOSEN:704,STOP_INPUT:705,BLOCK_FALL:706,SCORE_GOT:707,PLAYER_MOVED:708,CREATE_SUPER_ABILITY:709,CREATE_SUPER_BLOCK:710,BLOCK_BOMB_CHOSEN:711,CHECK_SCORES_FOR_ABILITY:712,TOGGLE_SUPER_ABILITY:713,BOMB_IS_AVAILABLE:714,FEATURE_RESULT:715,BLOCK_BOMB_DONE:716,ACTIVATE_COLUMN_ERASER:717,COLUMN_ERASER_DONE:718,TELEPORT_IS_AVAILABLE:719,TELEPORT_STARTED:720,CHANGE_BLOCK_ANIMATION:721,TELEPORTED_BLOCK_CHOSEN:722,START_TELEPORTATION:723,TELEPORTATION_COMPLETE:724,IS_SCORE_ENOUGH:725});n.default=o,e.exports=n.default,cc._RF.pop()},{}],GameLogicManager:[function(t,e){"use strict";cc._RF.push(e,"4c089PGYllClJS4rqeWu/cL","GameLogicManager");var n=s(t("GameEvent")),o=s(t("BlockColorType")),i=s(t("UiScreenType"));function s(t){return t&&t.__esModule?t:{default:t}}s(t("EffectType")),cc.Class({extends:cc.Component,properties:{numeralToDestroy:{default:3},_field:{default:null,type:cc.Node,serializable:!1},_numeralStrings:{default:7,serializable:!1},_numeralColumns:{default:10,serializable:!1},_widthColumn:{default:155,serializable:!1},_widthOffset:{default:697,serializable:!1},_highColumn:{default:233,serializable:!1},_highOffset:{default:700,serializable:!1},_numberColors:{default:5,serializable:!1},_blocksArray:{default:[],serializable:!1},_tempCoalitionArray:{default:[],serializable:!1},_numeralToDestroy:{default:3,serializable:!1},_numeralFallBlocks:{default:0,serializable:!1},_stopSuperAbility:{default:!1,serializable:!1},_isScoreEnoughForBomb:{default:!1,serializable:!1},_isScoreEnoughForTeleport:{default:!1,serializable:!1},_amountBlocksForEraserAppearing:{default:5,serializable:!1},_isFieldOn:{default:!1,serializable:!1},_isTeleportMode:{default:!1,serializable:!1}},onEnable:function(){this._handleSubscription(!0),this._numeralToDestroy=this.numeralToDestroy},onDisable:function(){this._handleSubscription(!1)},_handleSubscription:function(t){var e=t?"on":"off";cc.systemEvent[e](n.default.FIELD_ON,this.onFieldOn,this),cc.systemEvent[e](n.default.BLOCK_CHOSEN,this.onBlockChosen,this),cc.systemEvent[e](n.default.BLOCK_FALL,this.onBlockFall,this),cc.systemEvent[e](n.default.CREATE_SUPER_ABILITY,this.onCreateSuperAbility,this),cc.systemEvent[e](n.default.BOMB_IS_AVAILABLE,this.onBombIsAvailable,this),cc.systemEvent[e](n.default.TELEPORT_IS_AVAILABLE,this.onTeleportIsAvailable,this),cc.systemEvent[e](n.default.FEATURE_RESULT,this.onFeatureResult,this),cc.systemEvent[e](n.default.TELEPORTATION_COMPLETE,this.onTeleportationComplete,this),cc.systemEvent[e](n.default.START_TELEPORTATION,this.onStartTeleportation,this)},_createBlockArray:function(){this._blocksArray=[];for(var t=1,e=0;e<this._numeralColumns;e+=1)for(var n=0;n<this._numeralStrings;n+=1){var o=this._setLocation(n,e);this._blocksArray[n]||(this._blocksArray[n]=[]),this._blocksArray[n][e]=this._createBlock(o),this._blocksArray[n][e].id=t,this._blocksArray[n][e].iI=n,this._blocksArray[n][e].iJ=e,t+=1}},_createBlock:function(t){var e=cc.instantiate(this._block);return e.kind=this._chooseColor(),e.setParent(this._field),e.setPosition(t),e.active=!0,e.coalition=0,e.transferred=0,e},_setLocation:function(t,e){return cc.v2(e*this._widthColumn-this._widthOffset,t*this._highColumn-this._highOffset)},_chooseColor:function(){return Math.ceil(Math.random()*this._numberColors)-1},_findCoalition:function(t,e,n){t&&t.iI<0||t.iI>this._numeralStrings-1||t.iJ<0||t.iJ>this._numeralColumns-1||0===t.coalition&&t.kind===e&&(t.coalition=n,this._tempCoalitionArray.push(t),this._blocksArray[t.iI-1]&&this._blocksArray[t.iI-1][t.iJ]&&this._findCoalition(this._blocksArray[t.iI-1][t.iJ],e,n),this._blocksArray[t.iI+1]&&this._blocksArray[t.iI+1][t.iJ]&&this._findCoalition(this._blocksArray[t.iI+1][t.iJ],e,n),this._blocksArray[t.iI]&&this._blocksArray[t.iI][t.iJ-1]&&this._findCoalition(this._blocksArray[t.iI][t.iJ-1],e,n),this._blocksArray[t.iI]&&this._blocksArray[t.iI][t.iJ+1]&&this._findCoalition(this._blocksArray[t.iI][t.iJ+1],e,n))},_checkOnShuffle:function(){this._numeralCoalition=1,this._tempCoalitionArray=[];for(var t=0;t<this._numeralStrings;t+=1)for(var e=0;e<this._numeralColumns-1;e+=1)if(this._findCoalition(this._blocksArray[t][e],this._blocksArray[t][e].kind,this._numeralCoalition),this._tempCoalitionArray.length>=this._numeralToDestroy&&(this._numeralCoalition+=1),this._tempCoalitionArray=[],this._numeralCoalition>1)return!0;return!1},_checkClickedBlock:function(t,e){switch(void 0===e&&(e=0),this._resetCoalition(),this._tempCoalitionArray=[],e){case o.default.Bomb:cc.systemEvent.emit(n.default.TOGGLE_SUPER_ABILITY,!0),this._stopSuperAbility=!1,cc.systemEvent.emit(n.default.BLOCK_BOMB_DONE,t.id),cc.systemEvent.emit(n.default.BLOCK_BOMB_CHOSEN,[t.iI,t.iJ],this._numeralColumns,this._numeralStrings);break;case o.default.ColumnEraser:cc.systemEvent.emit(n.default.TOGGLE_SUPER_ABILITY,!0),this._stopSuperAbility=!1,cc.systemEvent.emit(n.default.COLUMN_ERASER_DONE,t.id),cc.systemEvent.emit(n.default.ACTIVATE_COLUMN_ERASER,[t.iI,t.iJ],this._numeralColumns,this._numeralStrings);break;default:if(this._findCoalition(t,t.kind,1),this._tempCoalitionArray.length<this._numeralToDestroy)return this._resetCoalition(),void cc.systemEvent.emit(n.default.BLOCK_CAN_BE_CHOSEN);this._tempCoalitionArray.length>this._amountBlocksForEraserAppearing-1&&this.onCreateSuperAbility(o.default.ColumnEraser,cc.v2(t.iI,t.iJ)),this._finalChecking()}},_transferBlocksUp:function(){for(var t=this,e=[],o=0;o<this._numeralColumns;o++)e.push(0);this._numeralFallBlocks=this._tempCoalitionArray.length,cc.systemEvent.emit(n.default.SCORE_GOT,this._numeralFallBlocks),this._tempCoalitionArray.forEach(function(o){cc.systemEvent.emit(n.default.SPAWN_EFFECT,o.convertToWorldSpaceAR(cc.v2(0,0))),o.opacity=0;var i=t._numeralStrings+e[o.iJ];cc.systemEvent.emit(n.default.CAMERA_START_SHAKE),t.scheduleOnce(function(){cc.systemEvent.emit(n.default.CAMERA_STOP_SHAKE)},.2),o.y=t._setLocation(i,o.iJ).y,e[o.iJ]+=1,o.kind=t._chooseColor(),cc.systemEvent.emit(n.default.CHOOSE_COLOR_BLOCK,o.id,o.kind),t._blocksArray[i]||(t._blocksArray[i]=[]),t._blocksArray[i][o.iJ]=o,t._blocksArray[o.iI][o.iJ]=null;for(var s=o.iI;s<t._numeralStrings+e[o.iJ];s+=1)t._blocksArray[s][o.iJ]&&(t._blocksArray[s][o.iJ].transferred+=1);o.transferred=i-t._numeralStrings,o.transferred++,o.iI=i})},_regularizeTransferredBlocks:function(){for(var t=this._blocksArray.length,e=this._numeralStrings;e<t;e+=1)for(var o=0;o<this._numeralColumns;o+=1)if(this._blocksArray[e]&&this._blocksArray[e][o])for(var s=0;s<t;s+=1)this._blocksArray[s]&&this._blocksArray[s][o]&&this._blocksArray[s][o].transferred>0&&(this._blocksArray[s-this._blocksArray[s][o].transferred][o]=this._blocksArray[s][o],this._blocksArray[s-this._blocksArray[s][o].transferred][o].iI=s-this._blocksArray[s][o].transferred,this._blocksArray[s-this._blocksArray[s][o].transferred][o].transferred=0,this._blocksArray[s-this._blocksArray[s][o].transferred][o].coalition=0);this._lastFallingBlock=t-this._numeralStrings,this._blocksArray.splice(this._numeralStrings,t-this._numeralStrings);for(var a=0;a<this._numeralStrings;a+=1)for(var r=0;r<this._numeralColumns;r+=1)this._blocksArray[a][r].removeFromParent(),this._field.addChild(this._blocksArray[a][r]);if(!this._checkOnShuffle()&&!this._isScoreEnoughForBomb&&(this._createBlockArray(),!this._checkOnShuffle()))for(cc.systemEvent.emit(n.default.SHOW_SCREEN,i.default.Result,!0,!1);!this._checkOnShuffle();)this._createBlockArray()},_resetCoalition:function(){for(var t=0;t<this._numeralStrings;t+=1)for(var e=0;e<this._numeralColumns;e+=1)this._blocksArray[t][e].coalition=0},_finalChecking:function(){cc.systemEvent.emit(n.default.PLAYER_MOVED),this._transferBlocksUp(),cc.systemEvent.emit(n.default.TIME_TO_FALL),this._regularizeTransferredBlocks(),this._resetCoalition()},_findIndexes:function(t){for(var e=0;e<this._numeralStrings;e+=1)for(var n=0;n<this._numeralColumns;n+=1)if(this._blocksArray[e][n].id===t)return cc.v2(e,n)},_findID:function(t){for(var e=0;e<this._numeralStrings;e+=1)for(var n=0;n<this._numeralColumns;n+=1)if(this._blocksArray[e][n].iI===t.x&&this._blocksArray[e][n].iJ===t.y)return this._blocksArray[e][n].id},_useAbilityTnt:function(){this._createBlockArray(),cc.systemEvent.emit(n.default.SCORE_GOT,this._numeralColumns*this._numeralStrings)},onCreateSuperAbility:function(t,e){var i=this;if(void 0===e&&(e=cc.v2(-1,-1)),!this._stopSuperAbility){if(cc.systemEvent.emit(n.default.TOGGLE_SUPER_ABILITY,!1),this._stopSuperAbility=!0,t===o.default.Teleport)return this.onTeleportIsAvailable(!0),void cc.systemEvent.emit(n.default.TELEPORT_STARTED);this.scheduleOnce(function(){var o;o=e.x<0?Math.ceil(Math.random()*(i._numeralStrings*i._numeralColumns-1)):i._findID(e),cc.systemEvent.emit(n.default.CREATE_SUPER_BLOCK,o,t)},.1)}},onFieldOn:function(t,e){for(this._isFieldOn=!0,this._field=t,this._block=e,this._field&&this._block&&this._createBlockArray();!this._checkOnShuffle();)this._createBlockArray()},onBlockChosen:function(t){if(this._isTeleportMode)cc.systemEvent.emit(n.default.TELEPORTED_BLOCK_CHOSEN,t);else{cc.systemEvent.emit(n.default.STOP_INPUT);var e=0;t.kind!==o.default.Bomb&&t.kind!==o.default.ColumnEraser||(e=t.kind),this._checkClickedBlock(t,e)}},onBlockFall:function(t){t===this._lastFallingBlock&&this.scheduleOnce(function(){cc.systemEvent.emit(n.default.BLOCK_CAN_BE_CHOSEN)},.35)},onBombIsAvailable:function(t){this._isScoreEnoughForBomb=t},onTeleportIsAvailable:function(t){this._isScoreEnoughForTeleport=t,this._isTeleportMode=!0},onFeatureResult:function(t){var e=this;t.forEach(function(t){e._tempCoalitionArray.push(e._blocksArray[t[1]][t[0]])}),this._finalChecking()},onTeleportationComplete:function(){this._stopSuperAbility=!1,cc.systemEvent.emit(n.default.TOGGLE_SUPER_ABILITY,!0),this._regularizeTransferredBlocks()},onStartTeleportation:function(t,e){this._isTeleportMode=!1,this._blocksArray[t.iI][t.iJ]=e,this._blocksArray[e.iI][e.iJ]=t;var n=[e.iI,t.iI];t.iI=n[0],e.iI=n[1];var o=[e.iJ,t.iJ];t.iJ=o[0],e.iJ=o[1],this._resetCoalition()}}),cc._RF.pop()},{BlockColorType:"BlockColorType",EffectType:"EffectType",GameEvent:"GameEvent",UiScreenType:"UiScreenType"}],IInputCommand:[function(t,e,n){"use strict";cc._RF.push(e,"99e6evg0NRAXYQg5060Ft6D","IInputCommand"),n.__esModule=!0,n.default=void 0;var o=function(){function t(t){this.node=t.node,this.manager=t,this.touches=t.touches,this._currentTouch=null}var e=t.prototype;return e.onDown=function(){},e.onMove=function(){},e.onUp=function(){},e.createTouchInfo=function(t,e){var n={id:t._id,down:this.getTouchInfo(t,e),last:this.getTouchInfo(t,e),current:this.getTouchInfo(t,e)},o=this.touches.indexOf(null);return-1===o&&(o=this.touches.length,this.touches.push(null)),t.__id=o,this.touches[o]=n,n},e.refreshTouchInfo=function(t,e,n){t.last=t.current,t.current=this.getTouchInfo(e,n)},e.findTouch=function(t){return this.touches[t.__id]},e.destroyTouch=function(t){this.touches[t.__id]=null},e.getTouchInfo=function(t){var e=t.getLocation(),n=e.clone(),o=cc.Camera.main.getScreenToWorldPoint(t.getLocation());return n=this.node.convertToNodeSpaceAR(o),{time:this.manager.time,location:e,position:n,worldPosition:o}},t}();n.default=o,e.exports=n.default,cc._RF.pop()},{}],IScreen:[function(t,e){"use strict";function n(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}cc._RF.push(e,"4116cgCcRpB4JzE0qK5+5iz","IScreen"),cc.Class({extends:cc.Component,properties:{activated:{default:!1,notify:function(){for(var t,e=n(this.node._children);!(t=e()).done;)t.value.active=this.activated;this.onSwitchActiveCallback instanceof Function&&this.onSwitchActiveCallback(this.activated)},tooltip:"\u0438\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440 \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438, \u043f\u0440\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0438 \u0430\u043a\u0442\u0438\u0432\u0438\u0440\u0443\u0435\u0442/ \u0434\u0435\u0430\u043a\u0442\u0438\u0432\u0438\u0440\u0443\u0435\u0442 \u0434\u0435\u0442\u0441\u043a\u0438\u0435 \u043d\u043e\u0434\u044b"}},editor:{menu:"Ui/IScreen"},onLoad:function(){this.activated=!1,this.node.opacity=0},show:function(t){return void 0===t&&(t=.5),this.activated=!0,pg.tweenManager.add(this.node,{opacity:255},t)},hide:function(t){var e=this;void 0===t&&(t=.5);var n=pg.tweenManager.add(this.node,{opacity:0},t);return n.addCompleteCallback(function(){e.activated=!1}),n},onSwitchActiveCallback:null}),cc._RF.pop()},{}],IngameButtonInputCommand:[function(t,e,n){"use strict";cc._RF.push(e,"6dabeHDqmZGbJ5Amvi2vYA0","IngameButtonInputCommand"),n.__esModule=!0,n.default=void 0;var o=a(t("GameEvent")),i=a(t("IInputCommand")),s=a(t("UiScreenType"));function a(t){return t&&t.__esModule?t:{default:t}}function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){var e,n;function i(e){return t.call(this,e)||this}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var a=i.prototype;return a.onDown=function(){cc.systemEvent.emit(o.default.SHOW_SCREEN,s.default.Result,!1)},a.onUp=function(){},i}(i.default);n.default=c,e.exports=n.default,cc._RF.pop()},{GameEvent:"GameEvent",IInputCommand:"IInputCommand",UiScreenType:"UiScreenType"}],InputCatcher:[function(t,e){"use strict";cc._RF.push(e,"5c208WPE0dJ94YMlwaqMAcI","InputCatcher");var n=s(t("GameEvent")),o=s(t("InputDirection")),i=s(t("InputType"));function s(t){return t&&t.__esModule?t:{default:t}}cc.Class({extends:cc.Component,properties:{direction:{default:o.default.None,type:o.default,tooltip:"\u043c\u0435\u0441\u0442\u043e \u043e\u0442\u043a\u0443\u0434\u0430 \u043f\u0440\u0438\u0448\u0435\u043b \u0438\u043d\u043f\u0443\u0442, \u043f\u043e \u044d\u043d\u0430\u043c\u0443 InputDirection"},target:{default:null,type:cc.Component,tooltip:"\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0431\u0443\u0434\u0435\u0442 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u0430 \u0432 \u043a\u043e\u043c\u0430\u043d\u0434\u0443. \u0412 \u043a\u043e\u043c\u0430\u043d\u0434\u0435 \u043c\u043e\u0436\u043d\u043e \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0435\u0435 \u043c\u0435\u0442\u043e\u0434\u044b"},analyticsArea:""},editor:{menu:"Input/InputCatcher"},onEnable:function(){this._handleSubscription(!0)},onDisable:function(){this._handleSubscription(!1)},_handleSubscription:function(t){var e=t?"on":"off";this.node[e](cc.Node.EventType.TOUCH_START,this.onDown,this),this.node[e](cc.Node.EventType.TOUCH_MOVE,this.onMove,this),this.node[e](cc.Node.EventType.TOUCH_END,this.onUp,this),this.node[e](cc.Node.EventType.TOUCH_CANCEL,this.onUp,this)},onDown:function(t){cc.systemEvent.emit(n.default.INPUT,i.default.Down,this.direction,t.touch,this,this.target)},onMove:function(t){cc.systemEvent.emit(n.default.INPUT,i.default.Move,this.direction,t.touch,this,this.target)},onUp:function(t){cc.systemEvent.emit(n.default.INPUT,i.default.Up,this.direction,t.touch,this,this.target)}}),cc._RF.pop()},{GameEvent:"GameEvent",InputDirection:"InputDirection",InputType:"InputType"}],InputDirection:[function(t,e){"use strict";cc._RF.push(e,"e3ebeGio1VOB7jSgH0EthDA","InputDirection");var n=cc.Enum({None:0,GameArea:1,RevivePopup:20,ResultScreen:40,IngameButton:41,FakeScreen:42,CrossPromoCross:43,Block:44,BombShop:45,TntShop:46,TeleportShop:47});e.exports=n,cc._RF.pop()},{}],InputManager:[function(t,e){"use strict";cc._RF.push(e,"18de99Dw7VByYjVG4YLT+oA","InputManager");var n=f(t("GameEvent")),o=f(t("InputDirection")),i=f(t("InputType")),s=(f(t("IInputCommand")),f(t("GameAreaInputCommand"))),a=f(t("BombShopInputCommand")),r=f(t("TeleportShopInputCommand")),c=f(t("TntShopInputCommand")),l=f(t("IngameButtonInputCommand")),u=f(t("FakeScreenInputCommand")),h=f(t("CrossPromoInputCommand")),p=f(t("BlockInputCommand"));function f(t){return t&&t.__esModule?t:{default:t}}cc.Class({extends:cc.Component,properties:{checkUserSleep:{default:!0,tooltip:"\u0441\u043b\u0435\u0434\u0438\u0442\u044c \u0437\u0430 \u0431\u0435\u0437\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435\u043c \u0438\u0433\u0440\u043e\u043a\u0430?"},tutorialTimeout:{default:3,tooltip:"\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u0438\u043d\u0442\u0435\u0432\u0430\u043b (\u0441\u0435\u043a), \u043f\u043e \u0438\u0441\u0442\u0435\u0447\u0435\u043d\u0438\u0438 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u0441\u044f \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u0435"},time:{get:function(){return this._time},visible:!1},commands:{default:{},visible:!1,serializable:!1},_isFirstTap:{default:!0,serializable:!1},_userSleepTime:{default:0,serializable:!1},_time:{default:0,serializable:!1},_isInput:{default:!1,serializable:!1},_isSleep:{default:!1,serializable:!1}},editor:{menu:"Input/InputManager"},onLoad:function(){cc.systemEvent.on(n.default.INPUT,this.onInput,this),this.commands[o.default.GameArea]=new s.default(this),this.commands[o.default.BombShop]=new a.default(this),this.commands[o.default.TeleportShop]=new r.default(this),this.commands[o.default.TntShop]=new c.default(this),this.commands[o.default.IngameButton]=new l.default(this),this.commands[o.default.FakeScreen]=new u.default(this),this.commands[o.default.CrossPromoCross]=new h.default(this),this.commands[o.default.Block]=new p.default(this)},onInput:function(t,e,o,s,a){var r=this.commands[e];switch(this._userSleepTime=0,this._isSleep=!1,t){case i.default.Down:r&&r.onDown(o,s,a),this._isFirstTap&&(this._isFirstTap=!1,cc.systemEvent.emit(n.default.FIRST_TAP)),this._isInput=!0;break;case i.default.Move:r&&r.onMove(o,s,a);break;case i.default.Up:r&&(r.onUp(o,s,a),this._isSleep=!0,this._isInput=!1)}},onDown:function(){},onMove:function(){},onUp:function(){}}),cc._RF.pop()},{BlockInputCommand:"BlockInputCommand",BombShopInputCommand:"BombShopInputCommand",CrossPromoInputCommand:"CrossPromoInputCommand",FakeScreenInputCommand:"FakeScreenInputCommand",GameAreaInputCommand:"GameAreaInputCommand",GameEvent:"GameEvent",IInputCommand:"IInputCommand",IngameButtonInputCommand:"IngameButtonInputCommand",InputDirection:"InputDirection",InputType:"InputType",TeleportShopInputCommand:"TeleportShopInputCommand",TntShopInputCommand:"TntShopInputCommand"}],InputType:[function(t,e){"use strict";cc._RF.push(e,"944fc4QXTNN2r/nds1rE+r+","InputType");var n=cc.Enum({None:0,Down:1,Move:2,Up:3,Cansel:4});e.exports=n,cc._RF.pop()},{}],ResultManager:[function(t,e){"use strict";cc._RF.push(e,"706890AvoBLZJ5DJcEsc6Y/","ResultManager");var n,o=(n=t("GameEvent"))&&n.__esModule?n:{default:n};cc.Class({extends:cc.Component,properties:{textWin:{default:null,type:cc.SpriteFrame},textLose:{default:null,type:cc.SpriteFrame},text:{default:null,type:cc.Sprite}},onEnable:function(){this._handleSubscription(!0)},onDisable:function(){this._handleSubscription(!1)},_handleSubscription:function(t){var e=t?"on":"off";cc.systemEvent[e](o.default.SHOW_SCREEN,this.onShowScreen,this)},onShowScreen:function(t,e,n){void 0===n&&(n=!0),this.text.spriteFrame=n?this.textWin:this.textLose}}),cc._RF.pop()},{GameEvent:"GameEvent"}],ScoreManager:[function(t,e){"use strict";cc._RF.push(e,"aa94blfoFBIers1x8DxiGzj","ScoreManager");var n=a(t("GameEvent")),o=a(t("UiScreenType")),i=a(t("BombType")),s=a(t("../Enums/BlockColorType"));function a(t){return t&&t.__esModule?t:{default:t}}cc.Class({extends:cc.Component,properties:{level:{default:null,type:cc.Label},steps:{default:null,type:cc.Label},localScores:{default:null,type:cc.Label},totalScores:{default:null,type:cc.Label},progress:{default:null,type:cc.Node},_level:{default:0,serializable:!1},_steps:{default:20},_stepsFirstLevels:{default:10},_stepsNextLevels:{default:21},_numberForAvailableCreation:{default:10},_widthMultiplier:{default:1500},_scoresBorder:{default:18},_localScores:{default:40},_needingScores:{default:0,serializable:!1},_totalScores:{default:0},_canCheckForScoresAbility:{default:!0},_isStopAdding:{default:!1}},onEnable:function(){this._handleSubscription(!0),this._createNewLevel(),this.totalScores.string=this._totalScores},onDisable:function(){this._handleSubscription(!1)},_handleSubscription:function(t){var e=t?"on":"off";cc.systemEvent[e](n.default.SCORE_GOT,this.onScoreGot,this),cc.systemEvent[e](n.default.PLAYER_MOVED,this.onPlayerMoved,this),cc.systemEvent[e](n.default.IS_SCORE_ENOUGH,this.onIsScoreEnough,this),cc.systemEvent[e](n.default.TOGGLE_SUPER_ABILITY,this.onToggleSuperAbility,this),cc.systemEvent[e](n.default.SHOW_SCREEN,this.onShowScreen,this)},_createNewLevel:function(){this._level+=1,this._steps=this._stepsNextLevels-this._level,this._steps<this._stepsFirstLevels&&(this._steps=this._stepsFirstLevels),this._localScores=this._scoresBorder+Math.ceil(2*this._level),this._needingScores=this._localScores,this.level.string=this._level,this.localScores.string=this._localScores,this.steps.string=this._steps,this.progress.width=0},_checkForScores:function(t,e){return t>=e},onScoreGot:function(t){this._isStopAdding||(this._localScores-=t,this._totalScores+=t,this.totalScores.string=this._totalScores,this._checkForScores(this._totalScores,this._numberForAvailableCreation)&&cc.systemEvent.emit(n.default.BOMB_IS_AVAILABLE,!0),this._localScores<1?(cc.systemEvent.emit(n.default.SHOW_SCREEN,o.default.Result,!0,!0),this._createNewLevel()):(this.localScores.string=this._localScores,pg.tweenManager.add(this.progress,{width:this._widthMultiplier*((this._needingScores-this._localScores)/this._needingScores)},.2)))},onPlayerMoved:function(){this._isStopAdding=!1,this._steps-=1,this._steps<1?cc.systemEvent.emit(n.default.SHOW_SCREEN,o.default.Result,!0,!1):this.steps.string=this._steps},onIsScoreEnough:function(t,e){if(this._canCheckForScoresAbility){var o=!1;switch(t){case s.default.Bomb:this._totalScores>=e&&(o=!0,this._totalScores-=e,this._checkForScores(this._totalScores,e)||cc.systemEvent.emit(n.default.BOMB_IS_AVAILABLE,!1));break;case s.default.Teleport:this._totalScores>=e&&(o=!0,this._totalScores-=e);break;case i.default.Tnt:return}o&&(cc.systemEvent.emit(n.default.CREATE_SUPER_ABILITY,t),this.totalScores.string=this._totalScores)}},onToggleSuperAbility:function(t){this._canCheckForScoresAbility=t},onShowScreen:function(t,e,n){void 0===n&&(n=!0),this._isStopAdding=!0,n||(this._level=0,this._totalScores=0,this.totalScores.string=this._totalScores,this._localScores=0,this._createNewLevel())}}),cc._RF.pop()},{"../Enums/BlockColorType":"BlockColorType",BombType:"BombType",GameEvent:"GameEvent",UiScreenType:"UiScreenType"}],ScreenManager:[function(t,e){"use strict";cc._RF.push(e,"e4303kOybFGuZ4EIneNDh0N","ScreenManager");var n=i(t("GameEvent")),o=i(t("UiScreenType"));function i(t){return t&&t.__esModule?t:{default:t}}var s=cc.Class({name:"ScreenStartSettings",properties:{type:{default:o.default.None,type:o.default,tooltip:"\u0442\u0438\u043f \u044d\u043a\u0440\u0430\u043d\u0430 \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043d\u0430 \u0441\u0442\u0430\u0440\u0442\u0435"},zIndex:{default:0,tooltip:"\u043f\u043e\u0440\u044f\u0434\u043a\u043e\u0432\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u044d\u043a\u0440\u0430\u043d\u0430 \u0434\u043b\u044f \u043e\u0442\u0440\u0438\u0441\u043e\u0432\u043a\u0438. \u0447\u0435\u043c \u043d\u0438\u0436\u0435 \u043d\u043e\u043c\u0435\u0440, \u0442\u0435\u043c \u0433\u043b\u0443\u0431\u0436\u0435 \u043e\u043d \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u0440\u0438\u0441\u043e\u0432\u0430\u043d"},activateOnStart:{default:!1,tooltip:"\u0430\u043a\u0442\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0439 \u044d\u043a\u0440\u0430\u043d \u043f\u0440\u0438 \u0441\u0442\u0430\u0440\u0442\u0435?"},disableOnShow:{default:[],type:[o.default],tooltip:"\u043a\u0430\u043a\u0438\u0435 \u044d\u043a\u0440\u0430\u043d\u044b \u0441\u043a\u0440\u044b\u0442\u044c \u043f\u0440\u0438 \u0430\u043a\u0442\u0438\u0432\u0430\u0446\u0438\u0438 \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u044d\u043a\u0440\u0430\u043d\u0430 (\u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043f\u0440\u0438 \u0430\u043a\u0442\u0438\u0432\u0430\u0446\u0438\u0438 \u044d\u043a\u0440\u0430\u043d\u0430 \u043d\u0430 \u0441\u0442\u0430\u0440\u0442\u0435)"}}});cc.Class({extends:cc.Component,properties:{screenSettings:{default:[],type:[s],notify:function(t){var e=[];this.activateOnStart.forEach(function(t){t.type!==o.default.None&&e.find(function(e){return e.type===t.type})||e.push(t)}),t.length!==e.length&&(this.activateOnStart=e)},tooltip:"\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u043a\u0430\u043a\u0438\u0435 \u044d\u043a\u0440\u0430\u043d\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0441\u043e\u0437\u0434\u0430\u043d\u044b \u0438 \u0430\u043a\u0442\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u043d\u0430 \u0441\u0442\u0430\u0440\u0442\u0435"}},onEnable:function(){this._handleSubscription(!0),this.screenSettings.sort(function(t,e){return t.zIndex-e.zIndex}).forEach(function(t){cc.systemEvent.emit(n.default.TOGGLE_SCREEN,t.type,t.activateOnStart)})},onDisable:function(){this._handleSubscription(!1)},_handleSubscription:function(t){var e=t?"on":"off";cc.systemEvent[e](n.default.SHOW_SCREEN,this.onShowScreen,this)},onShowScreen:function(t,e){void 0===e&&(e=!0);var o=this.screenSettings.find(function(e){return e.type===t});e?o&&(o.disableOnShow.forEach(function(t){cc.systemEvent.emit(n.default.TOGGLE_SCREEN,t,!1)}),cc.systemEvent.emit(n.default.TOGGLE_SCREEN,t,!0)):cc.systemEvent.emit(n.default.TOGGLE_SCREEN,t,!1)}}),cc._RF.pop()},{GameEvent:"GameEvent",UiScreenType:"UiScreenType"}],TeleportAnimationsType:[function(t,e,n){"use strict";cc._RF.push(e,"e2358lQ6g5N4rBCVWWRFNxl","TeleportAnimationsType"),n.__esModule=!0,n.default=void 0;var o=cc.Enum({None:0,Choosing:1,Accepted:2});n.default=o,e.exports=n.default,cc._RF.pop()},{}],TeleportShopInputCommand:[function(t,e,n){"use strict";cc._RF.push(e,"3f11bhI/OhDzbfywTiIIQts","TeleportShopInputCommand"),n.__esModule=!0,n.default=void 0;var o=a(t("GameEvent")),i=a(t("IInputCommand")),s=a(t("BlockColorType"));function a(t){return t&&t.__esModule?t:{default:t}}function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){var e,n;function i(e){return t.call(this,e)||this}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var a=i.prototype;return a.destroyTouch=function(e){t.prototype.destroyTouch.call(this,e),this._currentTouch=null},a.onDown=function(){cc.systemEvent.emit(o.default.CHECK_SCORES_FOR_ABILITY,s.default.Teleport)},a.onMove=function(){},a.onUp=function(){},i}(i.default);n.default=c,e.exports=n.default,cc._RF.pop()},{BlockColorType:"BlockColorType",GameEvent:"GameEvent",IInputCommand:"IInputCommand"}],Teleport:[function(t,e){"use strict";cc._RF.push(e,"110ebWVkl1OdIPvaRh59m8U","Teleport");var n=s(t("GameEvent")),o=s(t("Feature")),i=s(t("TeleportAnimationsType"));function s(t){return t&&t.__esModule?t:{default:t}}cc.Class({extends:o.default,properties:{_firstTeleportPosition:{default:cc.v2(6,4),serializable:!1},_secondTeleportPosition:{default:cc.v2(6,7),serializable:!1}},_handleSubscription:function(t){var e=t?"on":"off";cc.systemEvent[e](this.initializingEvent,this.onInitializingEvent,this),cc.systemEvent[e](n.default.TELEPORTED_BLOCK_CHOSEN,this.onTeleportBlockChosen,this)},onTeleportBlockChosen:function(t){this._firstBlock?(this._secondCoord=cc.v2(t.x,t.y),cc.systemEvent.emit(n.default.CHANGE_BLOCK_ANIMATION,this._secondTeleportPosition,i.default.None),cc.systemEvent.emit(n.default.CHANGE_BLOCK_ANIMATION,cc.v2(t.iI,t.iJ),i.default.Accepted),cc.systemEvent.emit(n.default.START_TELEPORTATION,this._firstBlock,t,this._firstCoord,this._secondCoord),this._firstBlock=!1):(this._firstBlock=t,this._firstCoord=cc.v2(t.x,t.y),cc.systemEvent.emit(n.default.CHANGE_BLOCK_ANIMATION,this._firstTeleportPosition,i.default.None),cc.systemEvent.emit(n.default.CHANGE_BLOCK_ANIMATION,cc.v2(t.iI,t.iJ),i.default.Accepted),t.iJ===this._secondTeleportPosition.y&&this._secondTeleportPosition.x--,cc.systemEvent.emit(n.default.CHANGE_BLOCK_ANIMATION,this._secondTeleportPosition,i.default.Choosing))},onInitializingEvent:function(){cc.systemEvent.emit(n.default.CHANGE_BLOCK_ANIMATION,this._firstTeleportPosition,i.default.Choosing)}}),cc._RF.pop()},{Feature:"Feature",GameEvent:"GameEvent",TeleportAnimationsType:"TeleportAnimationsType"}],TntShopInputCommand:[function(t,e,n){"use strict";cc._RF.push(e,"cca15+/8oVLpqUOOGVNQw7p","TntShopInputCommand"),n.__esModule=!0,n.default=void 0;var o=a(t("GameEvent")),i=a(t("IInputCommand")),s=a(t("BombType"));function a(t){return t&&t.__esModule?t:{default:t}}function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){var e,n;function i(e){return t.call(this,e)||this}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var a=i.prototype;return a.destroyTouch=function(e){t.prototype.destroyTouch.call(this,e),this._currentTouch=null},a.onDown=function(){cc.systemEvent.emit(o.default.CHECK_SCORES_FOR_ABILITY,s.default.Tnt)},a.onMove=function(){},a.onUp=function(){},i}(i.default);n.default=c,e.exports=n.default,cc._RF.pop()},{BombType:"BombType",GameEvent:"GameEvent",IInputCommand:"IInputCommand"}],UiManager:[function(t,e){"use strict";cc._RF.push(e,"070a3zwyHlNto8VTnHNBhkX","UiManager");var n=s(t("GameEvent")),o=s(t("UiScreenType")),i=s(t("IScreen"));function s(t){return t&&t.__esModule?t:{default:t}}cc.Class({extends:cc.Component,properties:{PREVIEW:{default:!1,editorOnly:!0,tooltip:"\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435 \u0442\u0438\u043f\u044b \u044d\u043a\u0440\u0430\u043d\u043e\u0432 \u0438 \u043f\u0440\u0435\u0444\u0430\u0431\u044b \u043a \u043d\u0438\u043c"},screenType:{default:o.default.None,type:o.default,notify:function(t){if(this.screenType!==o.default.None){-1===this._convertScreenType.indexOf(this.screenType)&&(this._convertScreenType.push(this.screenType),this._prefabs.push(null)),this.prefab=this._prefabs[this._convertScreenType.indexOf(this.screenType)];var e=this._convertScreenType.indexOf(t);e>-1&&null===this._prefabs[e]&&(this._prefabs.splice(e,1),this._convertScreenType.splice(e,1))}},serializable:!1,tooltip:"\u0442\u0438\u043f \u044d\u043a\u0440\u0430\u043d\u0430 \u0434\u043b\u044f \u043f\u0440\u0438\u0432\u044f\u0437\u043a\u0438 \u043f\u0440\u0435\u0444\u0430\u0431\u0430"},prefab:{default:null,type:cc.Prefab,notify:function(){this.screenType!==o.default.None&&(this.prefab instanceof cc.Prefab||null===this.prefab)&&(this._prefabs[this._convertScreenType.indexOf(this.screenType)]=this.prefab)},visible:function(){return this.screenType!==o.default.None},serializable:!1,tooltip:"\u043f\u0440\u0435\u0444\u0430\u0431 \u0434\u043b\u044f \u044d\u043a\u0440\u0430\u043d\u0430"},convertScreenType:{get:function(){return this._convertScreenType},type:[o.default],visible:function(){return this.PREVIEW}},prefabs:{get:function(){return this._prefabs},type:[cc.Prefab],visible:function(){return this.PREVIEW}},_screens:{default:null,serializable:!1},_prefabs:{default:[],type:[cc.Prefab]},_convertScreenType:{default:[],type:[o.default]}},onEnable:function(){this._screens={};for(var t=0;t<this._convertScreenType.length;t++){var e=this._convertScreenType[t];this._screens[e]=null}this._handleSubscription(!0)},onDisable:function(){this._handleSubscription(!1)},_handleSubscription:function(t){var e=t?"on":"off";cc.systemEvent[e](n.default.TOGGLE_SCREEN,this.onToggleScreen,this)},onToggleScreen:function(t,e){var n,o=this._convertScreenType.indexOf(t);if(!(o<0)&&this._prefabs[o]){if(this._screens[t])n=this._screens[t];else{var s=this._prefabs[o];(n=cc.instantiate(s)).parent=this.node,this._screens[t]=n}e&&!n.getComponent(i.default).activated?n.getComponent(i.default).show():!e&&n.getComponent(i.default).activated&&n.getComponent(i.default).hide()}}}),cc._RF.pop()},{GameEvent:"GameEvent",IScreen:"IScreen",UiScreenType:"UiScreenType"}],UiScreenType:[function(t,e,n){"use strict";cc._RF.push(e,"eba07OJEJNGMrm5c06KLAaJ","UiScreenType"),n.__esModule=!0,n.default=void 0;var o=cc.Enum({None:0,Ingame:1,Result:2,Tutorial:3});n.default=o,e.exports=n.default,cc._RF.pop()},{}]},{},["Effect","EffectType","BlockColorType","BombType","GameEvent","TeleportAnimationsType","FeatureManager","BombLogic","ColumnEraser","Feature","Teleport","GameLogicManager","CatcherOff","CrossPromoCross","IScreen","ScoreManager","ResultManager","ScreenManager","UiManager","UiScreenType","Block","Field","CameraController2D","BlockInputCommand","BombShopInputCommand","CrossPromoInputCommand","FakeScreenInputCommand","GameAreaInputCommand","IInputCommand","IngameButtonInputCommand","TeleportShopInputCommand","TntShopInputCommand","InputDirection","InputType","InputCatcher","InputManager"]);